<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<link rel="stylesheet" type="text/css" href="../../css/mui.min.css" />
		<link rel="stylesheet" type="text/css" href="../../ux_1473630887_6370625/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="../../css/common.css" />
		<link rel="stylesheet" type="text/css" href="contactInfo.css" />
		<title>账户信息</title>
	</head>

	<body>
		<header class="mui-bar">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left pui-a-left"></a>
			<h1 class="mui-title">账户信息</h1>
		</header>
		<div class="mui-content">
			<ul class="mui-table-view">
				<li class="mui-table-view-input mui-input-row">
					<a href="#">
						<i class="icon icon-broad pui-icon-edit" data-type="name">&#xe607;</i>
						<label for="">姓名</label>
						<input type="text" value="张三丰" id="name" readonly="readonly" />
					</a>
				</li>
			</ul>
			<ul class="mui-table-view mt10">
				<li class="mui-table-view-input mui-input-row">
					<a href="#">
						<i class="icon icon-broad pui-icon-edit" data-type="tel">&#xe607;</i>
						<label for="">联系电话</label>
						<input type="text" name="" id="" value="100000000" id="tel" readonly="readonly" />
					</a>
				</li>
				<li class="mui-table-view-input mui-input-row">
					<a href="#">
						<i class="icon icon-broad pui-icon-edit" data-type="addr">&#xe607;</i>
						<label for="">详细地址</label>
						<input type="text" name="" id="" value="深圳宝安区西乡" id="addr" readonly="readonly" />
					</a>
				</li>
			</ul>
		</div>
		<!-- jQuer -->
		<script src="../../js/mui.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="../../js/common.js"></script>
		<script type="text/javascript">
			(function($, win, doc, undefined) {
				var openid = localStorage.getItem("ptt_openid");
				var access_token = localStorage.getItem("access_token");
				$("li").on("tap", "i", function() {
					var type = this.getAttribute("data-type");
					if(type == "name") {
						$.prompt('', '', '修改姓名', ['确定', '取消'], function() {
							if(e.index == 0) {
								$.ajax(req_url + "/api/v1/agent/contact?access_token=" + access_token + "&openid=" + openid, {
									dataType: 'json', //服务器返回json格式数据
									type: 'post', //HTTP请求类型
									timeout: 10000, //超时时间设置为10秒；
									data: {
										"id": localStorage.getItem("agentDetailId"),
										"contact": e.value
									},
									headers: {
										'Content-Type': 'application/x-www-form-urlencoded'
									},
									success: function(data) {
										if(data.code == 20001) {
											$.alert("修改成功", function() {

											}, "提示", "确定");
										}
									},
									error: function() {

									}
								});
							}
						}, 'div');
					} else if(type == "tel") {
						$.prompt('', '', '修改电话', ['确定', '取消'], function() {
							if(e.index == 0) {
								$.ajax(req_url + "/api/v1/agent/contact?access_token=" + access_token + "&openid=" + openid, {
									dataType: 'json', //服务器返回json格式数据
									type: 'post', //HTTP请求类型
									timeout: 10000, //超时时间设置为10秒；
									data: {
										"id": localStorage.getItem("agentDetailId"),
										"mobile": e.value
									},
									headers: {
										'Content-Type': 'application/x-www-form-urlencoded'
									},
									success: function(data) {
										if(data.code == 20001) {
											$.alert("修改成功", function() {

											}, "提示", "确定");
										}
									},
									error: function() {

									}
								});
							}
						}, 'div');
					} else {
						$.prompt('', '', '修改地址', ['确定', '取消'], function() {
							if(e.index == 0) {
								$.ajax(req_url + "/api/v1/agent/contact?access_token=" + access_token + "&openid=" + openid, {
									dataType: 'json', //服务器返回json格式数据
									type: 'post', //HTTP请求类型
									timeout: 10000, //超时时间设置为10秒；
									data: {
										"id": localStorage.getItem("agentDetailId"),
										"address": e.value
									},
									headers: {
										'Content-Type': 'application/x-www-form-urlencoded'
									},
									success: function(data) {
										if(data.code == 20001) {
											$.alert("修改成功", function() {

											}, "提示", "确定");
										}
									},
									error: function() {

									}
								});
							}
						}, 'div');
					}
				});

				var data = JSON.parse(localStorage.getItem("agentDetailInfo"));
				document.getElementById("name").value = data.data.name;
				document.getElementById("tel").value = data.data.mobile;
				document.getElementById("addr").value = data.data.address;
			})(mui, window, document)
		</script>
	</body>

</html>